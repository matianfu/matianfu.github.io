在嵌入式产品设计和工程中的PCB项目有很多不同的设计目标和设计取舍（trade-off），今天总结个人的一些设计和思考原则。

PCB项目大体分为两类：纯技术的（purely technical），或面向产品的（product oriented）。

纯技术项目通常没有明确和清晰的产品目的，只是为了验证一些设计想法，包括：

1. 某个芯片如何使用，比如初学USB-C PD可能希望试一下支持TCPC接口的控制芯片的使用，例如OnSemi FUSB307B；
2. 某个芯片的实际性能如何，例如buck-boost芯片SouthChip的SC8721，在不同输入电压下的最大输出能力与纹波情况；
3. 某个接口通讯的信号完整性和通讯协议是否可行，例如Microchip LAN7801的RGMII接口是否可以直接和一款arm soc的RGMII直连？芯片发热如何？EMI情况？软件驱动是否需要修改等等；

开发者常说的最小系统板，即仅有PMU，SOC，DDR，microSD卡或烧录用的USB口，和调试串口的板子也属于这一类，它的目的是面向基础的Bootloader/Kernel开发，相当于是个软件验证项目；

这类项目的目的可以概括为硬件验证、软件验证、和性能测试，性能包含但不限于速度、带宽、工作温度、功耗等等。

纯技术项目以『小』和『灵活』为设计原则，通常硬件有原厂开发板的可以直接使用，无需自己画板；如果原厂开发板太贵、采购不便，设计时也应该参考原版的使用方式和接口设计；这类板子通常可以打多几片，说不定什么时候就会用到。

虽然没有明确的用户场景，纯技术的验证项目也需明确回答该项目的技术收益，包括合规，灵活性、适用性、速度、带宽、功耗、成本等方面的收益；也需要指出其与已有方案相比的优劣；如果没有明确的收益、适用的场景过于狭隘、是临时的解决办法，或成本上在可见的未来都不会有什么优势，这个项目的意义或优先级，就很低了。

面向产品的PCB项目有很多阶段。

首先是PoC，Proof of Concept，注意PoC不是Prototype，PoC仅仅是概念原型，硬件上可以用各种方式『对付』，比如最终产品中必须板载一颗USB Hub芯片拓展接口，在PoC中允许使用市场上购买的商用产品来实现这个Hub功能。

PoC更多的强调用户交互，使用感受，走通业务流程等等。用于PoC的PCB项目通常是为『拼凑』系统而设计的，以『快』和『可用』为目标，甚至可以指定『有限』可用的情况，例如最终产品要求3A供电，那么PoC只提供1A可以简化设计，也是允许的。用于PoC的PCB设计通常没什么重用能力，也不考虑这个；设计上能用现成的组件就用现成的组件，例如有成品DC-DC模块就比自己搭DC-DC电路要方便。

早期原型，Early Prototype，是基于PoC的进化；但是又不同于进入产品开发阶段的原型。早期原型用于证明那些可能让项目翻船的风险是不存在的，即完成可行性（Viability）验证是它的目标。比如在PoC上用了罗技的商用摄像头作为动态图像捕捉装置，而到了Early Prototype就必须真的选一个模组和一个图像处理器，这个模组的是不是可用，驱动有没有问题，性能够不够，这些都是Early Prototype需要回答的，在Eary Prototype通过之后项目才能正式立项。

和立项之后的Prototype相比，Early Prototype要使用目标产品使用的实际物料，但Early Prototype不强调系统的完整性，它可能只做了一个局部，例如SoC拉出来Ethernet接口经专用可编程芯片到存储设备，要实现ATAoE协议，那就只把这部分电路实现了，硬件人员可以测试信号完整性、电流、功耗，软件人员可以调试代码，即可。

到了项目立项之后就是标准的EVT，DVT，和MP阶段了，这都有很正规的流程，系统的Specification，Testing，可靠性，老化，良率和产能的ramp-up，这些都不赘述了，在这个阶段用户需求和产品设计已经全部交付，开始了正式的设计和量产工程。在这个流程中早期的PCB，EVT1/EVT2仍可以称为Prototype，很多软件工作要早期介入；在DVT到MP，一般就称为Engineering Sample了，还有一些较小的软硬件bug需要fix，以及充分的测试，和结构、量产准备的配合。。

对于面向用户的产品，需要大概划分一下End User，可以是Developer，Hobbyist，或者Consumer。如果是Consumer，即产品是消费电子产品，那么会有专业的产品经理在项目中来主导产品的设计，用户如何使用。如果仅仅是提供给Developer或者Hobbyist的产品，则应该描述出相对准确的使用场景，比如软路由这就是比较细分和准确的需求，可以对标市场上哪些同类竞品，包括性能、价格、稳定性、功耗等，都可以比较；但如果仅仅说是个arm电脑，就过于宽泛和理想化了，因为至少在目前的市场上是没有多少用户购买一个arm处理器的SBC做上网或日常使用的；如果细化到儿童学习电脑开发这个场景，那需要细致的调研，不能假定自己做了一个可以用于儿童学习Scratch的arm板，儿童就会愿意用。

还有一类在硬件领域很常见的PCB产品是模块，或者叫模组；他们通常不独立工作，做成模组的目的是重用，降低工程成本。

对模组的设计要仔细考虑其『侵入性』。比如设计了一种自定义的接口，就是有侵入性的设计，使用者必须遵从这个接口的物理和电气规范；如果使用已有定义的工业或消费级接口，例如USB，就是非侵入性的接口设计；如果模组能伪装成一个标准设备，例如USB CDC/Ethernet，那就没有驱动层面的侵入性，如果是自定义通讯协议的设备，那就有侵入性了。

任何有侵入性的设计，无论接口定义，底层软件修改，对宿主方需要增加的软硬件成本，都会降低模组的实际适用性；所以如果模组不能在工程成本上有足够好的补偿，模块设计只能用于研发而无法用于量产。

事实上市场上的相当部分的模块设计都不太合乎上述要求，但仍然有广泛使用，主要是他们解决了一些工程上门槛很高的问题，以WiFi/Bluetooth，4G/5G模块最具代表性，即使接口不标准，软件不标准，在很多工程项目中仍然不得不用；但应该看到这是没有更好的设计出现的结果，如果有标准的物理接口定义和驱动程序的广泛兼容性，比如以Intel的系列WiFi网卡为代表，可以在市场上看到它是更受欢迎的，体现在很强的溢价能力上。

模块应该看作面向产品的项目，符合上述对面向产品的项目的要求设计和工程。

总结：

1. 纯技术项目
   1. 以小和灵活为设计目标
   2. 在技术角度同比评价成本收益
2. 面向应用的项目
   1. 可行性验证阶段
      1. PoC，快，可用
      2. Early Prototype，关键的可行性问题，不追求完整
   2. 立项设计和工程
      1. 正规的用户行为分析、设计、工程、测试、量产流程
      2. 即使是Developer Tool或Hobbyist产品也要理解具体使用场景
   3. 模块
      1. 减少侵入性设计，提高适用性
      2. 对量产使用而言通常是降低工程成本的，要算清楚经济帐

纯技术的验证，PoC和Early Prototype都是必要的工程阶段；很多产品上来就是Tight Schedule，大量东西都没有验证纯粹基于不可靠的经验和想象；硬件是慢慢来会比较快，不象软件可以通过增加人力大规模并行，硬件这样做很困难，遇到问题时浪费的工程成本极可观，甚至导致项目完全失败。
